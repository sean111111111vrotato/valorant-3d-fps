<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>3D FPS Test</title>
<style>
body {margin:0;overflow:hidden;background:#0f1923;}
#crosshair {
  position:absolute;
  top:50%;
  left:50%;
  width:10px;
  height:10px;
  margin:-5px 0 0 -5px;
  background:white;
  border-radius:50%;
  z-index:10;
}
</style>
</head>
<body>
<div id="crosshair"></div>

<script type="module">
// Import Three.js and PointerLockControls as modules (works on GitHub Pages)
import * as THREE from 'https://cdn.jsdelivr.net/npm/three@0.160.0/build/three.module.js';
import { PointerLockControls } from 'https://cdn.jsdelivr.net/npm/three@0.160.0/examples/jsm/controls/PointerLockControls.js';

// Scene
const scene = new THREE.Scene();
scene.background = new THREE.Color(0x0f1923);

// Camera
const camera = new THREE.PerspectiveCamera(75, window.innerWidth/window.innerHeight, 0.1, 1000);
camera.position.set(0,1.6,5);

// Renderer
const renderer = new THREE.WebGLRenderer({antialias:true});
renderer.setSize(window.innerWidth, window.innerHeight);
document.body.appendChild(renderer.domElement);

// Light
const light = new THREE.DirectionalLight(0xffffff, 1);
light.position.set(5,10,7);
scene.add(light);

// Floor
const floor = new THREE.Mesh(
    new THREE.PlaneGeometry(50,50),
    new THREE.MeshStandardMaterial({color:0x222222})
);
floor.rotation.x = -Math.PI/2;
scene.add(floor);

// PointerLockControls
const controls = new PointerLockControls(camera, renderer.domElement);
document.body.addEventListener('click', () => controls.lock());
scene.add(controls.getObject());

// Gun cube (first person)
const gun = new THREE.Mesh(
    new THREE.BoxGeometry(0.4,0.2,1),
    new THREE.MeshStandardMaterial({color:0x333333})
);
gun.position.set(0.3,-0.3,-0.8);
camera.add(gun);

// Movement
const move = { forward:false, back:false, left:false, right:false };
document.addEventListener('keydown', e=>{
    if(e.key==='w') move.forward=true;
    if(e.key==='s') move.back=true;
    if(e.key==='a') move.left=true;
    if(e.key==='d') move.right=true;
});
document.addEventListener('keyup', e=>{
    if(e.key==='w') move.forward=false;
    if(e.key==='s') move.back=false;
    if(e.key==='a') move.left=false;
    if(e.key==='d') move.right=false;
});

// Animate loop
function animate() {
    requestAnimationFrame(animate);
    const speed = 0.1;
    if(move.forward) controls.moveForward(speed);
    if(move.back) controls.moveForward(-speed);
    if(move.left) controls.moveRight(-speed);
    if(move.right) controls.moveRight(-speed);

    renderer.render(scene, camera);
}
animate();

// Resize
window.addEventListener('resize', () => {
    camera.aspect = window.innerWidth/window.innerHeight;
    camera.updateProjectionMatrix();
    renderer.setSize(window.innerWidth, window.innerHeight);
});
</script>
</body>
</html>
